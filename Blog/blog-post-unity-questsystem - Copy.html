<!DOCTYPE html>

<html lang="en">

<head>

    <!-- ==============================================
    Basic Page Needs
    =============================================== -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--[if IE]><meta http-equiv="x-ua-compatible" content="IE=9" /><![endif]-->

    <title>Ben Nilsson - Portfolio</title>

    <meta name="description" content="Computer Games Developer. I am a Danish aspiring games developer and content creator based in the UK. Currently studying at Staffordshire University.">
    <meta name="subject" content="Computer Games Developer. I am a Danish aspiring games developer and content creator based in the UK. Currently studying at Staffordshire University.">

    <!-- ==============================================
    Favicons
    =============================================== -->
    <link rel="shortcut icon" href="../assets/images/favicon.ico">
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../assets/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../assets/images/apple-touch-icon-114x114.png">

    <!-- ==============================================
    Vendor Stylesheet
    =============================================== -->
    <link rel="stylesheet" href="../assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/vendor/slider.min.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/vendor/icons.min.css">
    <link rel="stylesheet" href="../assets/css/vendor/animation.min.css">
    <link rel="stylesheet" href="../assets/css/vendor/gallery.min.css">

    <!-- ==============================================
    Custom Stylesheet
    =============================================== -->
    <link rel="stylesheet" href="../assets/css/default.css">
    <link rel="stylesheet" href="../assets/css/theme-light-blue.css">

    <link rel="stylesheet" href="../assets/highlight/styles/rider.dark.css">
    <script src="../assets/highlight/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- ==============================================
    Theme Settings
    =============================================== -->
    <style>
        :root {
            --header-bg-color: #2f2f2f;
            --nav-item-color: #f5f5f5;
            --top-nav-item-color: #f5f5f5;
            --hero-bg-color: #181818;
            --section-1-bg-color: #2f2f2f;
            --section-2-bg-color: #181818;
            --section-3-bg-color: #181818;
            --section-4-bg-color: #181818;
            --section-5-bg-color: #181818;
            --section-6-bg-color: #181818;
            --footer-bg-color: #2f2f2f;
        }
    </style>

</head>

    <body class="theme-mode-dark">

        <!-- Header -->
        <header id="header">

            <!-- Navbar -->
            <nav class="navbar navbar-expand navbar-fixed">
                <div class="container header">

                    <!-- Navbar Brand-->
                    <a class="navbar-brand" href="#">
                        Ben Nilsson
                        <!-- 
                            Custom Logo
                            <img src="assets/images/logo.svg" alt="Leverage">
                        -->
                    </a>

                    <!-- Nav holder -->
                    <div class="ml-auto"></div>

                    <!-- Navbar Items -->
                    <ul class="navbar-nav items">
                        <li class="nav-item">
                            <a href="../index.html" class="nav-link">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="../Portfolio/index.html" class="nav-link">Portfolio</a>
                        </li>
                        <li class="nav-item">
                            <a href="../Blog/index.html" class="nav-link">Blog</a>
                        </li>
						<li class="nav-item">
                            <a href="../Contact/index.html" class="nav-link">Contact</a>
                        </li>
                    </ul>

                    <!-- Navbar Icons -->
                    <ul class="navbar-nav icons">
                        <li class="nav-item social">
                            <a href="https://twitter.com/BenNilsson97" class="nav-link" target="_blank"><i class="icon-social-twitter"></i></a>
                        </li>
						<li class="nav-item social">
                            <a href="https://www.linkedin.com/in/benjamin-nilsson/" class="nav-link" target="_blank"><i class="icon-social-linkedin"></i></a>
                        </li>
                        <li class="nav-item social">
                            <a href="https://www.youtube.com/KotieDev" class="nav-link" target="_blank"><i class="icon-social-youtube"></i></a>
                        </li>
                    </ul>

                    <!-- Navbar Toggle -->
                    <ul class="navbar-nav toggle">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#menu">
                                <i class="icon-menu m-0"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

        </header>
		
		<!-- Content -->
        <section id="content" class="section-1 body-mode-dark single">
            <div class="container">
                <div class="row">

                    <!-- Main -->
                    <main class="col-12 p-0">
                        <div class="row">
                            <div class="col-12 align-self-center">
                                <h2 class="mt-0 ml-0 header-color">Tutorial - Quest System in Unity</h2>

                                <!-- Post Holder -->
                                <ul class="post-holder">
                                    <li class="post-meta-item">
                                        <time class="date"><span class="posted-on">Posted on <time class="entry-date published updated header-color">December 17, 2021</time></span></time>
                                    </li>
                                </ul>
								<p>This tutorial will be covering a quest system that I have personally used for several projects now.<br>
								The Quest System will be using events to trigger when completed. The idea is that a quest is set up with
								multiple quest components. A component is essentially the quest objective, for instance, killing an enemy or collecting an item.
								The system will be using Scriptable Objects to allow for easy quest creation once the system is complete.</p>
								<p>If you have any suggestions on how to approach this better or how to optimise this system, please send me an email. I would love to discuss this!</p>
								
								<h3>Setting up the Quest class</h3>
								<p>Firstly, we created the classes neccessary to set up the Quest itself. The following classes needed are:
								<span class="class">Quest.cs</span> and <span class="class">QuestComponent.cs</span></p>
								<ul class="code-block">
                                    <li class="">
									<h4>Quest.cs</h4>
<!-- QUEST.CS -->
<pre class="cscode"><code class="language-csharp">using System;
using System.Collections.Generic;

namespace QuestSystem
{
    public enum QuestStatus { Inactive, Active, Completed };
    // Inactive     - Quest has not been started
    // Active       - Quest is current in progress
    // Completed    - Quest has been completed

    public class Quest
    {
        public event Action<Quest> OnQuestCompleted;

        public readonly string QuestName;
        public int QuestID;
        public QuestStatus QuestStatus;
        public List<QuestComponent> QuestComponents = new List<QuestComponent>();
    
        public Quest(string name, int id)
        {
            QuestName = name;
            QuestID = id;
            QuestStatus = QuestStatus.Inactive;
        }
    }
}

</code></pre>
								</li>
                                </ul>
								<p>The Quest class will keep track of the quests components and its active state. It will not be updating anything itself and will only serve as a holder for all components.
								We start off by giving the basic information that we need. The name, id, status, & the list of components. The list will be populated later.</p>
								
								<ul class="code-block">
                                    <li class="">
									<h4>QuestComponent.cs</h4>
<pre class="cscode"><code><span class="key">using</span> System;
using UnityEngine;

<span class="key">namespace</span> QuestSystem
{
    <span class="key">public</span> <span class="key">abstract</span> <span class="key">class</span> <span class="class">QuestComponent</span>
    {
        <span class="key">public</span> <span class="key">enum</span> <span class="orange">QuestComponentType</span>
        {
            EnemyKilled,
            ItemCollected
            <span class="com">// ADD CUSTOM TYPES BELOW</span>
        }
        
        <span class="key">public</span> <span class="key">event</span> <span class="orange">Action</span>&lt;<span class="class">QuestComponent</span>&gt; OnComponentCompleted;

        <span class="key">public</span> <span class="key">string</span> ComponentName;
        <span class="key">public</span> <span class="key">string</span> ComponentDescription;
        <span class="key">public</span> <span class="class">QuestComponentType</span> ComponentType;

        <span class="key">public</span> <span class="class">QuestComponent</span>(<span class="key">string</span> <span class="orange">name</span>, <span class="key">string</span> <span class="orange">description</span>)
        {
            ComponentName = <span class="orange">name</span>;
            ComponentDescription = <span class="orange">description</span>;
        }

        <span class="key">public</span> <span class="key">virtual</span> <span class="key">void</span> <span class="function">EnableComponent()</span>
        {
            <span class="class">Debug</span>.unityLogger.<span class="function">Log($<span class="str">"{ComponentName} has been enabled."</span>);</span>
        }

        <span class="key">public</span> <span class="key">virtual</span> <span class="key">void</span> <span class="function">MarkCompleted()</span>
        {
            <span class="class">Debug</span>.unityLogger.<span class="function">Log($<span class="str">"{ComponentName} has been completed."</span>);</span>
        }
    }
}</code></pre>
                                    </li>
                                </ul>
								<p>The component class will be marked as abstract since the idea is that we will be creating a new class for every component type.
								This way, we can set up neccessary events for each action required. In this example, we will be focusing on <b>EnemyKilled</b> and <b>ItemCollected</b>.
								two common gameplay mechanics that may be part of quests.</p>
                                
                                <h3>Creating Data in The Editor</h3>
								<p>In order to create quests easily, we will be taking advantage of scriptable objects. Start by creating two classes: <span class="class">SO_Quest</span> and <span class="class">SO_QuestComponent</span>.
								Both of these classes are fairly simply as all they do is contain the initial data. SO_QuestComponent will later be overwritten by each component.</p>
								<ul class="code-block" style="margin-bottom:15px;">
                                    <li class="">
									<h4>SO_Quest.cs</h4>
<pre class="cscode"><code><span class="key">using</span> System.Collections.Generic;
<span class="key">using</span> UnityEngine;

<span class="key">namespace</span> QuestSystem
{
    [<span class="class">CreateAssetMenu</span>(fileName = <span class="str">"Quest"</span>, menuName = <span class="str">"QuestSystem/Quest"</span>, order = <span class="orange">0</span>)]
    <span class="key">public</span> <span class="key">class</span> <span class="class">SO_Quest</span> : <span class="class">ScriptableObject</span>
    {
        <span class="key">public</span> <span class="key">string</span> questName;
        <span class="key">public</span> <span class="key">int</span> id;
        <span class="key">public</span> <span class="class">List</span>&lt;<span class="class">SO_QuestComponent</span>&gt; components;
    }
}</code></pre>
									</li>
                                </ul>
								<ul class="code-block">
                                    <li class="">
									<h4>SO_QuestComponent.cs</h4>
<pre class="cscode"><code><span class="key">using</span> UnityEngine;

<span class="key">namespace</span> QuestSystem
{
    <span class="key">public</span> <span class="key">abstract</span> <span class="key">class</span> <span class="class">SO_QuestComponent</span> : <span class="class">ScriptableObject</span>
    {
        <span class="function">[<span class="class">Header</span>(<span class="str">"Component Settings"</span>)]</span>
        <span class="key">public</span> <span class="key">string</span> componentName;
        <span class="key">public</span> <span class="class">QuestComponent</span>.<span class="orange">QuestComponentType</span> questType;
        <span class="function">[<span class="class">TextArea</span>(<span class="orange">2</span>, <span class="orange">10</span>)]</span>
        <span class="key">public</span> <span class="key">string</span> description;
    }
}</code></pre>
                                    </li>
                                </ul>
								<p>Before we can create any quest components in the editor, we must first create an example of a quest component. For now, let's focus
								on EnemyKilled. Create a new class called <span class="class">QC_EnemyKilled</span> and another called <span class="class">SO_QC_EnemyKilled</span> (QC standing for QuestComponent).
								For now, we will only insert the data we need and will focus on how to detect enemies killed later on.</p>
								
								<ul class="code-block" style="margin-bottom:15px;">
                                    <li class="">
									<h4>SO_QC_EnemyKilled.cs</h4>
<pre class="cscode"><code><span class="key">using</span> QuestSystem;

<span class="key">public</span> <span class="key">class</span> <span class="class">QC_EnemyKilled</span> : <span class="class">QuestComponent</span>
{
    <span class="key">private</span> <span class="key">int</span> _enemyID;
    <span class="key">private</span> <span class="key">int</span> _killCount;
    <span class="key">private</span> <span class="key">int</span> _initialKillCount;
    
    <span class="key">public</span> <span class="class">QC_EnemyKilled</span>(<span class="key">string</span> <span class="orange">name</span>, <span class="key">string</span> <span class="orange">description</span>, <span class="key">int</span> <span class="orange">enemyID</span>, <span class="key">int</span> <span class="orange">killCount</span>) : <span class="class">base</span>(<span class="orange">name</span>, <span class="orange">description</span>)
    {
        _enemyID = <span class="orange">enemyID</span>;
        _killCount = <span class="orange">killCount</span>;
        _initialKillCount = _killCount;
        ComponentType = <span class="orange">QuestComponentType.EnemyKilled</span>;
    }

    <span class="key">public</span> <span class="key">override</span> <span class="key">void</span> <span class="function">EnableComponent()</span>
    {
        <span class="key">base</span>.<span class="function">EnableComponent()</span>;
        <span class="com">// Subscribe to enemy kill event</span>
    }

    <span class="key">public</span> <span class="key">override</span> <span class="key">void</span> <span class="function">MarkCompleted()</span>
    {
        <span class="key">base</span>.<span class="function">MarkCompleted()</span>;
        <span class="com">// Unsubscribe from enemy kill event</span>
    }

    ~<span class="function">QC_EnemyKilled()
    {
        MarkCompleted();
    }</span>
}
</code></pre>
									</li>
                                </ul>
								
								<ul class="code-block">
                                    <li class="">
									<h4>SO_QC_EnemyKilled.cs</h4>
<pre class="cscode"><code><span class="key">using</span> UnityEngine;

<span class="key">namespace</span> QuestSystem
{
    [<span class="class">CreateAssetMenu</span>(fileName = <span class="str">"QC_EntityKilled"</span>, menuName = <span class="str">"QuestSystem/Components/QC_EntityKilled"</span>, order = <span class="orange">1</span>)]
    <span class="key">public</span> <span class="key">class</span> <span class="class">SO_QC_EnemyKilled</span> : <span class="class">SO_QuestComponent</span>
    {
        <span class="function">[<span class="class">Header</span>(<span class="str">"Entity Settings"</span>)]</span>
        <span class="key">public</span> <span class="key">int</span> enemyID;
        <span class="key">public</span> <span class="key">int</span> killCount; 
    }
}</code></pre>
									</li>
                                </ul>
								
								<p>With the basic implementation of a quest and components created, we are ready to set up the events and component. Before that though, we will need
								to create the data in the editor. Create a new folder somewhere within the assets folder called Quests. In there, create two scriptable objects: A quest and a quest component of type enemy killed.</p>
								
								<!-- Image -->
                                <div class="gallery" style="margin-top:15px;">
                                    <a href="../assets/images/tutorial-questsystem/scriptableobjectsmenu.png">
                                        <img src="../assets/images/tutorial-questsystem/scriptableobjectsmenu.png" class="w-100">
                                    </a>
									<a href="../assets/images/tutorial-questsystem/scriptableobjects.png">
                                        <img src="../assets/images/tutorial-questsystem/scriptableobjects.png" class="w-100" style="margin-top:15px;">
                                    </a>
                                </div>
								<p>Make sure to set up the scriptable objects to match the images above. You can obviously get as creative as you want to. I opted for rats because it's never been
								done before in games... I know! What an exciting quest.</p>
								
								<h3>Registering Quest Components</h3>
								<p>Since we now have access to custom quest components, we can finally register them inside of our quests!</p>
                            </div>
                        </div>        
                    </main>
                </div>
            </div>
        </section>

        <!-- Contact -->
        <section id="contact" class="section-4 odd">
            <div class="container">
				<div class="row">
					<div class="col-12 col-md-6 align-self-start text-center text-md-left">
						<div class="row intro">
							<div class="col-12 p-0">

								<div class="step-title">
									<h2 class="header-color">Contact</h2>
									<p>Want to get in contact with me?</p>
									<h5 class="odd">Email: <i class="alt">benjaminnilsson1997@gmail.com</i></h5>
									<p>You can also contact me through <br>social media if preferred.</p>
								</div>
								
								<ul class="navbar-nav share-list mt-0 ml-auto">
									<li class="nav-item">
										<a href="https://twitter.com/BenNilsson97" class="nav-link" target="_blank"><i class="icon-social-twitter"></i></a>
									</li>
									<li class="nav-item">
										<a href="https://www.linkedin.com/in/benjamin-nilsson/" class="nav-link" target="_blank"><i class="icon-social-linkedin"></i></a>
									</li>
									<li class="nav-item">
										<a href="https://www.youtube.com/KotieDev" class="nav-link" target="_blank"><i class="icon-social-youtube"></i></a>
									</li>
									<li class="nav-item">
										<a href="https://github.com/BenNilsson" class="nav-link" target="_blank"><i class="icon-social-github"></i></a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
            </div>
        </section>
        <!-- #region Global ============================ -->

        <!-- Modal [responsive menu] -->
        <div id="menu" class="p-0 modal fade" role="dialog" aria-labelledby="menu" aria-hidden="true">
            <div class="modal-dialog modal-dialog-slideout" role="document">
                <div class="modal-content full">
                    <div class="modal-header" data-dismiss="modal">
                        Menu <i class="icon-close"></i>
                    </div>
                    <div class="menu modal-body">
                        <div class="row w-100">
                            <div class="items p-0 col-12 text-center">
                                <!-- Append [navbar] -->
                            </div>
                            <div class="contacts p-0 col-12 text-center">
                                <!-- Append [navbar] -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scroll [to top] -->
        <div id="scroll-to-top" class="scroll-to-top">
            <a href="#header" class="smooth-anchor">
                <i class="icon-arrow-up"></i>
            </a>
        </div>        

        <!-- ==============================================
        Vendor Scripts
        =============================================== -->
        <script src="../assets/js/vendor/jquery.min.js"></script>
        <script src="../assets/js/vendor/jquery.easing.min.js"></script>
        <script src="../assets/js/vendor/jquery.inview.min.js"></script>
        <script src="../assets/js/vendor/popper.min.js"></script>
        <script src="../assets/js/vendor/bootstrap.min.js"></script>
        <script src="../assets/js/vendor/ponyfill.min.js"></script>
        <script src="../assets/js/vendor/slider.min.js"></script>
        <script src="../assets/js/vendor/animation.min.js"></script>
        <script src="../assets/js/vendor/progress-radial.min.js"></script>
        <script src="../assets/js/vendor/bricklayer.min.js"></script>
        <script src="../assets/js/vendor/gallery.min.js"></script>
        <script src="../assets/js/vendor/shuffle.min.js"></script>
        <script src="../assets/js/vendor/particles.min.js"></script>
        <script src="../assets/js/main.js"></script>

        <!-- #endregion Global ========================= -->

    </body>
</html>